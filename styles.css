/* ===== 亮色主題變數 ===== */
:root{--bg:#FAFAFA;
  --fg:#1F2937;
  --muted:#6B7280;
  --card:#FFFFFF;
  --border:#E5E7EB;
  --blue:#2973FF;
  --red:#FF184A;
  --green:#00C65A;
  --yellow:#F6E862;}
/* ===== 基礎 ===== */
*{box-sizing: border-box}
html,body{height: 100%;}
html{scroll-behavior:smooth;}
body{margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans TC", "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:var(--fg);
  background:
    radial-gradient(1200px 600px at 10% -10%,  rgba(41,115,255,.10), transparent 60%),
    radial-gradient(900px  500px at 110% 10%, rgba(255,24,74,.08),  transparent 60%),
    radial-gradient(800px  500px at 50%  120%, rgba(0,198,90,.08),  transparent 60%),
    var(--bg);
  line-height:1.6;}
/* 版心 */
.container{max-width:1120px;margin:0 auto;padding:0 20px}
/* ===== Header：固定不擠壓第一屏 ===== */
.site-header{position: fixed; top:0; left:0; right:0; z-index:20;
  background: rgba(255,255,255,.65);
  backdrop-filter: saturate(180%) blur(10px);
  border-bottom: 1px solid var(--border);}
.site-header .container{display:flex; align-items:center; gap:16px; padding:12px 20px}
/* 以 Grid 進行版面切齊 */
.brand{display:grid;
  grid-template-columns: auto 1fr; /* 左：logo 右：文字 */
  grid-template-rows: auto auto;   /* 上：中文 下：英文 */
  column-gap:12px;
  align-items:stretch;             /* 讓 logo 能撐滿兩行總高度 */
  text-decoration:none;
  color:var(--fg);
  min-width:0;}
/* 兩行文字分別落在第 2 欄、第 1/2 列 */
.brand-zh{grid-column: 2; grid-row: 1;
  font-weight: 800;
  letter-spacing: .02em;
  line-height: 1.15;       /* 建議明確設定行高，避免平台差異 */
  margin: 0;               /* 防止預設外距影響高度計算 */}
.brand-en{grid-column: 2; grid-row: 2;
  font-size: .75rem;
  color: var(--muted);
  line-height: 1.15;
  margin: 0;}
/* ===== 主容器啟用捲動對齊 ===== */
main.snap{scroll-snap-type: y mandatory;     /* 滿足 #1：一滑就對齊下一屏 */}
/* ===== 每個面板滿版高、置中卡片 ===== */
section.panel{min-height: 100svh;                /* 滿版高 */
  scroll-snap-align: start;          /* 對齊頂端 */
  scroll-snap-stop: always;
  display: grid;
  place-items: center;               /* 滿足 #2：版面置中 */
  margin: 0;
  padding-block: 24px;
  padding-top: calc(24px + 56px);    /* 粗估 header 高度，避免蓋住內容 */}
/* ===== Hero（亮色可讀性處理） ===== */
.hero{position:relative; overflow:hidden}
.hero-media{position:absolute; inset:0; overflow:hidden}
.hero-media img{width:100%; height:100%; object-fit:cover; filter:brightness(.9)}
.hero-blur{position:absolute; inset:0; background:rgba(255,255,255,.35); backdrop-filter: blur(10px);}
.hero-content{position:relative; z-index:1; text-align:center; padding-top:68px;}
.hero h1{font-size: clamp(28px, 5vw, 56px);
  margin:0 0 12px;
  letter-spacing:.02em;
  color:#ffffff}
.hero .sub{max-width:860px; margin:0 auto 0;
  font-size: clamp(14px, 1.9vw, 18px);
  color:#ffffff;}
/* ===== Profile 區塊（乾淨） ===== */
.profile{display:grid;
  grid-template-columns: 420px 1fr;
  gap:28px;
  align-items:center;
  padding:24px;
  background: var(--card);
  border:1px solid var(--border);
  border-radius:20px;
  box-shadow: 0 8px 28px rgba(31,41,55,.08);}
.profile-photo{width:100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius:16px;
  border:1px solid var(--border);
  background:#F3F4F6;}
/* 統一比例：三位老師皆為 4:3 */
.profile-photo.yang{aspect-ratio: 4 / 3; max-width: 500px; justify-self: center;}
.profile-photo.chou{aspect-ratio: 3 / 5; max-width: 350px; justify-self: center;}
.profile-photo.jian{aspect-ratio: 4 / 3; max-width: 500px; justify-self: center;}
.profile-title{margin:0 0 10px; font-size: clamp(20px, 2.4vw, 28px);}
.profile-list{margin:0; padding-left:18px}
.profile-list li{margin:6px 0}

@media (max-width: 900px){
.profile{grid-template-columns: 1fr;
    padding:20px;}
}

/* ===== 進場/退場淡入淡出 ===== */
.hero .hero-content,
.profile-section .profile{opacity: 0;
  transform: translateY(14px);
  transition: opacity .45s ease, transform .45s ease;}
.panel.in-view .hero-content,
.panel.in-view .profile{opacity: 1;
  transform: none;}
/* ===== Footer ===== */
.site-footer{border-top:1px solid var(--border);
  padding:16px 0;
  color:var(--muted);}
/* ===== 覆蓋層（完整經歷） ===== */
.overlay[hidden]{display:none;}
.overlay{position: fixed; inset:0; z-index:50;
  display:grid; place-items:center;
  background: rgba(17,24,39,.55);
  animation: fadeIn .25s ease;}
from{opacity:0}
to{opacity:1}
.overlay-card{width:min(880px, 92vw);
  max-height: 82vh;
  background: var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow: 0 20px 50px rgba(0,0,0,.18);
  display:flex; flex-direction:column;
  overflow:hidden;}
.overlay-body{padding:20px;
  overflow:auto;}
.overlay-title{margin:0 0 8px;}
.bio-pre{white-space:pre-wrap;
  background:#F9FAFB;
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px;}
.overlay-actions{border-top:1px solid var(--border);
  padding:12px 16px;
  display:flex; justify-content:flex-end;}
.btn{appearance:none; border:none; cursor:pointer;
  padding:8px 14px; border-radius:10px;
  background:#E5E7EB; color:#111827; font-weight:600;}
.btn:focus{outline:2px solid var(--blue); outline-offset:2px;}
.btn-primary{background:var(--blue); color:white;}
.btn-primary:hover{filter:brightness(.95);}
.bio-trigger-wrap{margin-top:10px;}
/* ===== 無障礙錨點 ===== */
.sr-anchor{position: absolute; inset:0 auto auto 0; width:1px; height:1px; overflow:hidden;}
.brand{display: flex;
  align-items: center;
  gap: 12px;  /* 圖片和文字的間距 */
  text-decoration: none;
  color: var(--fg);}
.brand-logo{display: block;                  /* 移除基線空隙 */
  width: clamp(32px, 4vw, 48px);   /* 手機小，桌機大，自動調節 */
  height: auto;                    /* 高度依比例縮放 */
  object-fit: contain;             /* 縮放到框內，不裁切 */}
/* 文字兩行：上下堆疊 */
.brand-text{display:flex;
  flex-direction:column;
  line-height:1.1;              /* 降低行高，避免看起來偏上或偏下 */}
/* ===== 背景玻璃層（會依捲動改色） ===== */
.bg-glass{position:fixed; inset:0; z-index:-1;
  pointer-events:none;
  /* 以主題色為主的漸層，增加存在感 */
  background:
    radial-gradient(1200px 600px at 20% -10%,  rgba(var(--theme-rgb, 41,115,255), .22), transparent 60%),
    radial-gradient(900px  500px at 110% 0%,  rgba(var(--theme-rgb, 41,115,255), .18), transparent 65%),
    linear-gradient(135deg, rgba(var(--theme-rgb, 41,115,255), .12), rgba(var(--theme-rgb, 41,115,255), 0) 55%),
    var(--bg);
  backdrop-filter: blur(14px) saturate(140%);
  transition: background 60ms linear;}
/* 不同教練主題色（可替換為 txt 內指定色號） */
:root{--yang: 41,115,255;   /* 藍 */
  --chou: 0,198,90;     /* 綠 */
  --jian: 255,24,74;    /* 紅 */
  /* 目前主題色（由 JS 寫入） */
  --theme-rgb: var(--yang);}

@media (max-height: 420px){
.panel .hero-content,
  .panel .profile{opacity: 1 !important;
    transform: none !important;}
main.snap{scroll-snap-type: y proximity;}
}

/* ===== Features 區塊 ===== */
:root{--yellow:#F6E862; /* 色號指引：黃色 */}
/* 整個區段背景白色（與需求一致） */
.features-section{background: #FFFFFF;}
/* 2×2 的卡片格；手機改 1 欄 */
.features-grid{display: grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 70px;
  align-items: stretch;
  /* 同步進場動畫（四張卡一起） */
  opacity: 0;
  transform: translateY(14px);
  transition: opacity .45s ease, transform .45s ease;}
.panel.in-view .features-grid{opacity: 1;
  transform: none;}

@media (max-width: 820px){
.features-grid{grid-template-columns: 1fr;}
}

/* 卡片本體：白底、圓角、邊框，像「天花板燈」外透 */
.feature-card{background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: clamp(16px, 2.2vw, 24px);
  text-align: center;
  font-weight: 700;
  line-height: 1.5;
  box-shadow:
    0 12px 28px rgba(31,41,55,.08); /* 基礎陰影 */}
.feature-card p{margin: 0;
  font-size: clamp(16px, 2.1vw, 20px);}
/* 四種「外透光」：黃、藍、綠、紅 */
.glow-yellow{/* 內圈柔光 + 外圈擴散 */
  box-shadow:
    0 12px 28px rgba(31,41,55,.08),
    0 0 28px rgba(246,232,98,.45),
    0 0 90px rgba(246,232,98,.28);}
.glow-blue{box-shadow:
    0 12px 28px rgba(31,41,55,.08),
    0 0 28px rgba(41,115,255,.45),
    0 0 90px rgba(41,115,255,.28);}
.glow-green{box-shadow:
    0 12px 28px rgba(31,41,55,.08),
    0 0 28px rgba(0,198,90,.45),
    0 0 90px rgba(0,198,90,.28);}
.glow-red{box-shadow:
    0 12px 28px rgba(31,41,55,.08),
    0 0 28px rgba(255,24,74,.45),
    0 0 90px rgba(255,24,74,.28);}
/* 無障礙隱藏用在區塊標題，保留語意又不佔版面 */
.sr-only{position:absolute !important;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;}
/* ===== 右側懸浮 Liquid Glass 導航 ===== */
.float-launchers{position: fixed;
  right: 16px; top: 0; bottom: 0;
  display: flex; flex-direction: column; justify-content: center;
  gap: 14px;
  z-index: 60;               /* 高於 header/內容 */
  pointer-events: none;      /* 外層不吃點擊，交給子元素 */}
/* 單一圓形按鈕（預設 56px 圓） */
.lg-chip{--size: 56px;
  --w: var(--size);
  --h: var(--size);
  --glass: rgba(255,255,255,.28);      /* 玻璃霧面 */
  --border: rgba(255,255,255,.45);
  --shadow: 0 10px 24px rgba(17,24,39,.10);
  --txt: #0f172a;                       /* 展開時的文字顏色 */

  display: inline-flex; align-items: center; justify-content: center;
  width: var(--w); height: var(--h);
  border-radius: 9999px;
  position: relative;
  pointer-events: auto;                 /* 可點擊 */
  color: #111827; text-decoration: none;
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%); /* iOS Safari */
  background:
    radial-gradient(140% 140% at 30% 25%, rgba(255,255,255,.55), rgba(255,255,255,.08) 55%),
    radial-gradient(100% 100% at 70% 75%, rgba(255,255,255,.35), transparent 60%),
    rgba(255,255,255,.18);
  border: 1px solid var(--border);
  box-shadow:
    var(--shadow),
    0 0 24px rgba(var(--glow, 41,115,255), .35),   /* 彩色外光暈 */
    inset 0 1px 0 rgba(255,255,255,.35);           /* 內緣高光 */
  transition:
    width .28s cubic-bezier(.22,.61,.36,1),
    border-radius .28s cubic-bezier(.22,.61,.36,1),
    box-shadow .28s linear,
    backdrop-filter .28s ease,
    -webkit-backdrop-filter .28s ease;
  overflow: hidden;                   /* 讓文字只從左側滑出 */}
/* 右停靠 + 左延展：把容器靠右、延展長度往左長 */
.float-launchers{align-items: flex-end;;}
/* 使子元素靠右邊對齊 */
.lg-chip:hover,
.lg-chip.is-open{--w: 172px;                          /* 展開寬度（可調） */
  border-radius: 9999px;}
/* 內文（由 data-label 提供） */
.lg-chip::after{content: attr(data-label);
  position: absolute;
  right: 22px;                        /* 與圖標間距 */
  left: 56px;                         /* 讓文字從圓左緣開始顯示 */
  display: block;
  font-weight: 800;
  white-space: nowrap;
  color: var(--txt);
  opacity: 0;
  transform: translateX(6px);
  transition: opacity .22s ease .08s, transform .22s ease .08s;}
.lg-chip:hover,
.lg-chip.is-open{--w: 172px;                 /* 你的展開寬度 */
  justify-content: flex-start;/* 圖標改靠左 */
  padding-left: 18px;         /* 左側內距，避免貼邊 */
  padding-right: 18px;        /* 右側內距 */}
/* 文字：hover/展開時顯示（預設是透明的） */
.lg-chip:hover::after,
.lg-chip.is-open::after{opacity: 1;
  transform: none;}
/* （可選）展開時給 icon 一點視覺間距 */
.lg-chip svg{margin-right: 0;}
.ig-chip:hover svg
.ig-chip.is-open svg{margin-right: 8px;}

@media (pointer: coarse){
.lg-chip{--size: 60px;}
}

@media (prefers-reduced-motion: reduce){
.lg-chip{transition: none;}
.lg-chip::after{transition: none;}
}

/* 鍵盤焦點時視覺同展開狀態（無障礙） */
.lg-chip.is-hovering{--w: 172px; justify-content:flex-start; padding-left:18px; padding-right:18px;}
.lg-chip.is-hovering::after{opacity:1; transform:none;}
/* ===== teachers page ===== */
.teachers-hero .container{text-align: center;}
.teachers-hero h1{font-size: clamp(28px, 4.2vw, 42px);
  margin: 0 0 8px;
  letter-spacing: .02em;}
.teachers-hero .sub{color: var(--muted);
  margin: 0;}
/* === Teachers: 順序固定＋尺寸自適應 === */
.teachers-grid{display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  grid-auto-flow: row;         /* 依 DOM 順序由左至右、再換行 */
  align-items: stretch;
  gap: 20px;}
/* 白卡：沿用全域色票與陰影語言 */
.teacher-card{position: relative;
  display: grid; 
  flex-direction: column;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 8px 28px rgba(31,41,55,.08);
  overflow: hidden;
  transition: transform .15s ease, box-shadow .15s ease;
  grid-template-rows: 62% 1fr;  /* 上方媒體區約 62%，下方文字區自動 */
  aspect-ratio: 4 / 5;}
.teacher-card:hover{transform: translateY(-2px);
  box-shadow: 0 14px 42px rgba(31,41,55,.12);}
/* 由底部往上「透出光色」：四種類別 */
.teacher-card::after{content:"";
  position: absolute; inset: auto 0 0 0;
  height: 46px;
  pointer-events: none;
  opacity: .28;                 /* 平時低彩度 */
  filter: blur(12px);
  transform: translateY(14px);  /* 讓光暈主要在卡片內側 */
  transition: opacity .2s ease;
  background:
    radial-gradient(120% 100% at 50% 120%,
      var(--glow, transparent) 0%,
      transparent 70%);}
.teacher-card:hover::after{opacity: .36;}
/* 類別對應（使用全域色票變數） */
.teacher-card.-woodwind{--glow: rgba( var(--red-rgb, 255,24,74), .75 );}
.teacher-card.-brass{--glow: rgba( var(--blue-rgb,41,115,255), .75 );}
.teacher-card.-perc{--glow: rgba( var(--green-rgb,0,198,90), .75 );}
.teacher-card.-other{--glow: rgba( var(--yellow-rgb,246,232,98), .85 );}
/* 讓 rgb 版本可被 JS 或未來樣式利用（備援：從 hex 推估的預設 rgb） */
:root{--blue-rgb: 41,115,255;
  --red-rgb: 255,24,74;
  --green-rgb: 0,198,90;
  --yellow-rgb: 246,232,98;}
/* 內文與媒體 */
.teacher-card .media{width: 100%;
  aspect-ratio: auto;
  background: #F3F4F6;
  overflow: hidden;}
.teacher-card .media img{width: 100%; height: 100%; object-fit: cover;
  display: block;}
.teacher-card .content{padding: 14px 16px 16px;}
.teacher-card .name{margin: 0 0 6px;
  font-weight: 800;
  font-size: 18px;}
.teacher-card .role{margin: 0 0 8px;
  font-size: 14px;
  color: var(--muted);}
/* 徽章保留，但低彩度以符合首頁氣質 */
.teacher-card .badge{display: inline-block;
  font-size: 12px; font-weight: 700;
  padding: 4px 10px;
  border-radius: 999px;
  background: #F7F7F7;
  border: 1px solid var(--border);}

@media (pointer: coarse) {
.float-launchers{align-items: flex-end;}
.float-launchers .lg-chip{transition: opacity .2s ease, transform .2s ease;}
/* 預設只顯示主按鈕；其他 chip 先隱藏 */
  .float-launchers:not(.is-show) .lg-chip:not(.lg-main){opacity: 0;
    pointer-events: none;
    transform: translateY(6px);}
/* 展開時顯示所有 chip */
  .float-launchers.is-show .lg-chip{opacity: 1;
    transform: none;}
}

@media (pointer: coarse) {
.lg-chip{--w: 56px !important;}
/* base circle size (matches your design) */
  .lg-chip:hover,
  .lg-chip.is-open{--w: 56px !important;}
/* keep circle even when 'armed' */
  /* Optional: armed glow for feedback */
  .lg-chip.is-open{box-shadow: 0 0 0 3px rgba(0,0,0,.06), 0 0 0 6px rgba(var(--glow, 41,115,255), .25);}
}

@media (pointer: coarse) {
/* Hamburger keeps circle always */
  .lg-main,
  .lg-main:hover,
  .lg-main.is-open{--w: 56px !important;}
/* Other chips: circle by default, widen on first tap (.is-open) */
  .lg-chip:not(.lg-main).is-open{--w: 172px !important;}
}

/* 手機保底：寬度很窄時至少保 2 欄（≤520px） */
@media (max-width: 520px) {
  .teachers-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px;                /* 卡片間距略縮，避免擠壓 */
  }
  .teacher-card .name { font-size: 16px; }
  .teacher-card .role { font-size: 13px; }
  .teacher-card .content { padding: 12px 12px 14px; }
}


/* 平板保底：寬度介於 521px~1024px 時至少保 3 欄 */
@media (min-width: 521px) and (max-width: 1024px) {
  .teachers-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 18px;
  }
}


/* ===== Achievements page (appended) ===== */
/* Use red theme on this page */
#achievements-page .bg-glass{ --theme-rgb: var(--red-rgb); }

/* Non-fullheight sections for this page */
.panel.is-auto{
  min-height: auto;
  scroll-snap-align: none;
  scroll-snap-stop: auto;
  display: block;
  padding-top: calc(12px + 56px);
  padding-bottom: 16px;
}

/* Generic card (align to site language) */
.card{background: var(--card); border:1px solid var(--border); border-radius:16px;
  box-shadow: 0 8px 28px rgba(31,41,55,.08);}
.card.pad{padding:18px}

/* Hero text alignment */
.achievements-hero .container{text-align:center;}
.achievements-hero h1{font-size:clamp(28px,4.2vw,42px);margin:0 0 8px;letter-spacing:.02em; color:#fff;}
.achievements-hero .sub{color:#fff;margin:0;}

/* Toolbar & filters */
.achievements-toolbar{display:grid;gap: 14px;padding:14px;}
.achievements-toolbar .legend{display:flex;flex-wrap:wrap;gap:8px;}
.achievements-toolbar .filters{display:flex;gap:8px;flex-wrap:wrap;}
.achievements-toolbar .btn{border:1px solid var(--border);background:#fff;
  box-shadow:0 2px 4px rgba(0,0,0,.08);border-radius:12px;
  padding:8px 12px;font-weight:700;font-size:14px;cursor:pointer;}
.achievements-toolbar .btn[aria-pressed="true"]{outline:2px solid #ffccd5;}

/* Badges – light metallic */
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;
  border-radius:999px;font-size:12px;font-weight:600;border:1px solid transparent; background:#f9fafb;}
.badge .dot{width:10px;height:10px;border-radius:50%;background:currentColor;
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);}
.b-特優{color:#7d6922;background:linear-gradient(180deg,#fffbef,#fff5da);border-color:#f3e9c8;}
.b-優等{color:#7a7a7a;background:linear-gradient(180deg,#fcfcfd,#f3f5f8);border-color:#e8ebf0;}
.b-甲等{color:#865236;background:linear-gradient(180deg,#fff5ee,#ffe6d1);border-color:#f2ddc9;}
.b-無{color:#6b7280;background:#f3f4f6;border-color:#e5e7eb;}
.b-尚未出賽{color:#6b7280;background:#f9fafb;border-color:#e5e7eb;opacity:.75;}

/* Cards grid */
.achievements-grid{display:grid;gap:16px;padding:16px;
  grid-template-columns:repeat(auto-fit, minmax(360px, 1fr));
}
.year-card h3{margin:0;font-size:clamp(18px,2.6vw,22px);font-weight:800;}
.year-card .block h4{margin:0 0 8px;font-size:clamp(15px,2.2vw,18px);font-weight:700;color:#374151;}
.year-card .rows .row{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center;
  padding:8px 0;border-top:1px dashed #eee;}
.year-card .rows .row:first-child{border-top:0;}

/* 手機保底、平板保底（teacher grid 已有） */

/* === Achievements: 統一設計 + 兩欄版面 + 濾鏡淡入（2025-09-10） === */

/* Sticky 工具列（不壓到 header） */
#achievements-page .achievements-toolbar{
  position: sticky;
  top: calc(56px + 8px);
  max-width: 680px;
  margin: 0 auto;
  z-index: 5;
}

/* 年度白卡：標題與副標（桃園市／全國） */
.year-card .hd{display:flex; align-items:baseline; gap:10px; margin-bottom:8px;}
.year-card .hd .desc{color: var(--muted); font-size: 13px}

/* 兩欄群組：左「桃園市」、右「全國」 */
.year-card .blocks{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media (max-width: 680px){
  .year-card .blocks{grid-template-columns: 1fr;}
}

/* 每一欄（比賽範疇）標題 */
.year-card .block{background: #fff; border: 1px solid var(--border);
  border-radius: 12px; padding: 12px;}
.year-card .block h4{margin: 0 0 8px; font-weight: 800; color: #374151}

/* 單列：左曲目、右徽章 */
.year-card .rows{display: grid; gap: 0;}
.year-card .row{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 0;
  border-top: 1px dashed #E5E7EB;
}
.year-card .row:first-child{border-top: 0;}
.year-card .label{color: #111827;}

/* 成績徽章：沿用全站 .badge + 等第色系（已定義） */
.year-card .badge{font-weight: 700;}

/* 切換年度時的淡入動畫（需求 4） */
.achievements-grid.anim-enter .year-card{opacity: 0; transform: translateY(8px);}
.achievements-grid.anim-enter .year-card.anim-in{
  opacity: 1; transform: none;
  transition: opacity .35s ease, transform .35s ease;
}

/* === Achievements grid: Desktop/Tablet 2 cols; Mobile 1 col (2025-09-10) === */



/* Toolbar title (achievements) */
.cta-title{font-weight:800;font-size:16px;line-height:1.2;margin:0;}


#achievements-page .achievements-grid{
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
@media (max-width: 680px){
  #achievements-page .achievements-grid{
    grid-template-columns: 1fr;
  }
}

/* 手機時再更小一點 */
@media (max-width: 520px) {
  #achievements-page .achievements-toolbar {
    max-width: 88%;        /* 接近全寬，但保留邊距 */
    padding: 16px 12px;    /* 上下左右內距 */
  }
}

/* 「查看歷屆成績」標題與下面按鈕的距離 */
#achievements-page .cta-link {
  margin-bottom: 10px;     /* 增加間距 */
  pointer-events: none;    /* 不能點擊 */
}

/* === Mobile hamburger circle & flow animation (2025-09-11) === */
@media (pointer: coarse){
  /* keep hamburger perfectly round on all devices */
  .lg-main{
    --size: 56px;
    width: var(--size) !important;
    height: var(--size) !important;
    aspect-ratio: 1 / 1;
    border-radius: 50% !important;
    flex: 0 0 auto;
    padding: 0 !important;
    transform: translateZ(0); /* iOS/Safari raster hint to avoid distortion */
  }

  /* stage-in sequence: hamburger visible, other chips fade+lift in */
  .float-launchers .lg-chip{
    opacity: 0;
    transform: translateY(6px) scale(.98);
    transition:
      opacity .22s ease,
      transform .28s cubic-bezier(.22,.61,.36,1);
  }
  .float-launchers .lg-main{
    opacity: 1;
    transform: none;
  }
  .float-launchers.is-show .lg-chip{
    opacity: 1;
    transform: none;
  }
  /* staggered timing (DOM order: 1=hamburger, 2..N=chips) */
  .float-launchers.is-show .lg-chip:nth-of-type(2){ transition-delay: 40ms; }
  .float-launchers.is-show .lg-chip:nth-of-type(3){ transition-delay: 80ms; }
  .float-launchers.is-show .lg-chip:nth-of-type(4){ transition-delay: 120ms; }
  .float-launchers.is-show .lg-chip:nth-of-type(5){ transition-delay: 160ms; }
  .float-launchers.is-show .lg-chip:nth-of-type(6){ transition-delay: 200ms; }

  /* first tap on a chip -> widen & show label a beat later for smoothness */
  .lg-chip:not(.lg-main).is-open{ --w: 172px !important; padding-left: 18px; padding-right: 18px; }
  .lg-chip.is-open::after{ transition-delay: .06s; }

  /* hamburger never widens; remains a circle even when menu is open */
  .lg-main,
  .lg-main:hover,
  .lg-main.is-open{ --w: 56px !important; }
}


/* === Hotfix 2025-09-11: keep hamburger icon centered on touch devices === */
@media (pointer: coarse){
  .lg-main,
  .lg-main:hover,
  .lg-main.is-open{
    --w: 56px !important;          /* width stays circular */
    justify-content: center !important;  /* never shift left */
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}


/* === Fix 2025-09-11: Force hamburger always circular on touch devices === */
@media (pointer: coarse){
  .lg-main,
  .lg-main.is-open,
  .lg-main:hover{
    width: 56px !important;
    height: 56px !important;
    border-radius: 50% !important;
    aspect-ratio: 1 / 1 !important;
    justify-content: center !important;
    padding: 0 !important;
  }
}

/* === Fix 2025-09-11: Teachers grid keep 3 cols also in landscape tablets === */
@media (min-width: 1025px) and (max-width: 1366px){
  .teachers-grid{
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    gap: 20px;
  }
}


/* === Fix 2025-09-11: Touch hamburger stays perfectly circular even when menu is open === */
@media (pointer: coarse){
  .float-launchers .lg-main,
  .float-launchers .lg-main:hover,
  .float-launchers .lg-main.is-open{
    width: 60px !important;
    height: 60px !important;
    --w: 60px !important;
    --h: 60px !important;
    border-radius: 50% !important;
    aspect-ratio: 1 / 1 !important;
    justify-content: center !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  /* other chips remain circles by default when menu opens; only widen on .is-open */
  .float-launchers.is-show .lg-chip{ --w: 60px !important; }
  .float-launchers .lg-chip svg{ display:block; } /* avoid baseline shift */
  .float-launchers .lg-chip:not(.lg-main).is-open{
    --w: 172px !important;
    justify-content: flex-start !important;
    padding-left: 18px !important;
    padding-right: 18px !important;
  }
}

/* === Fix 2025-09-11: Teachers grid keeps 3 columns on tablet landscape === */
@media (min-width: 700px) and (max-width: 1180px) and (orientation: landscape){
  .teachers-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
}
/* Also ensure larger tablets (e.g., 1025–1366px) don't collapse */
@media (min-width: 1025px) and (max-width: 1366px){
  .teachers-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
}

/* Tablet～大平板：僅師資頁 grid 所在容器放寬，避免外距過大 */
@media (min-width: 700px) and (max-width: 1366px){
  /* 只放寬含有 .teachers-grid 的那個 .container */
  .panel .container:has(.teachers-grid){
    /* 盡量吃滿視窗，但仍保留左右安全邊距；避免突破 header 的視覺節奏 */
    max-width: min(1260px, calc(100vw - 2*max(16px, 2.5vw)));
  }

  /* 3 欄固定，拉高單欄最小寬度避免卡片被壓小（外距自然會小於卡片寬的 1/3） */
  .teachers-grid{
    grid-template-columns: repeat(3, minmax(clamp(300px, 28vw, 380px), 1fr)) !important;
    gap: clamp(16px, 2.2vw, 24px);
  }

  /* 卡片比例稍微偏方，視覺更「有份量」 */
  .teacher-card{
    aspect-ratio: 3 / 4;
    grid-template-rows: 64% 1fr;
  }
}
